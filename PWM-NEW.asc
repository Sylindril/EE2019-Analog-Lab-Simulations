Version 4
SHEET 1 3492 1184
WIRE 1872 -128 1184 -128
WIRE 1776 -16 1776 -48
WIRE 1792 -16 1776 -16
WIRE 1872 -16 1872 -128
WIRE 1408 16 1344 16
WIRE 1504 16 1472 16
WIRE 1776 80 1776 -16
WIRE 1744 96 1680 96
WIRE 1872 112 1872 -16
WIRE 1872 112 1808 112
WIRE 2272 112 1872 112
WIRE 1744 128 1712 128
WIRE 1440 160 1440 128
WIRE 1184 176 1184 -128
WIRE 1232 176 1184 176
WIRE 1344 176 1344 16
WIRE 1344 176 1312 176
WIRE 1408 176 1344 176
WIRE 1776 176 1776 144
WIRE 1504 192 1504 16
WIRE 1504 192 1472 192
WIRE 1600 192 1504 192
WIRE 1712 192 1712 128
WIRE 1712 192 1680 192
WIRE 1408 208 1360 208
WIRE 1440 256 1440 224
WIRE 1712 288 1712 192
WIRE 1744 288 1712 288
WIRE 1872 288 1872 112
WIRE 1872 288 1824 288
WIRE 1360 320 1360 208
WIRE 1504 320 1504 192
WIRE 2272 320 1504 320
WIRE 1776 400 1776 384
WIRE 1856 400 1776 400
WIRE 1968 400 1936 400
WIRE 1776 432 1776 400
WIRE 1504 448 1504 320
WIRE 1536 448 1504 448
WIRE 1632 448 1600 448
WIRE 1744 448 1632 448
WIRE 1968 464 1968 400
WIRE 1968 464 1808 464
WIRE 2272 464 1968 464
WIRE 1744 480 1696 480
WIRE 1632 512 1632 448
WIRE 1776 528 1776 496
WIRE 1600 640 1600 448
WIRE 2272 640 1600 640
FLAG 1440 256 0
FLAG 1776 176 0
FLAG 1776 528 0
FLAG 2272 464 PWM
IOPIN 2272 464 Out
FLAG 1440 128 VDD
IOPIN 1440 128 In
FLAG 1776 -48 VDD
IOPIN 1776 -48 In
FLAG 1776 384 VDD
IOPIN 1776 384 In
FLAG 1696 480 VCTRL
IOPIN 1696 480 In
FLAG 1632 592 VBIAS
IOPIN 1632 592 In
FLAG 1680 96 VCM
IOPIN 1680 96 In
FLAG 1360 320 VCM
IOPIN 1360 320 In
FLAG 2272 112 VSQR
IOPIN 2272 112 Out
FLAG 2272 320 VRAMP
IOPIN 2272 320 Out
FLAG 2272 640 VRAMP_B
IOPIN 2272 640 Out
SYMBOL res 1696 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 20k
SYMBOL res 1840 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 1328 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 12.5k
SYMBOL cap 1472 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL cap 1600 432 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Cbias
SYMATTR Value 1µ
SYMBOL res 1616 496 R0
SYMATTR InstName Rbias
SYMATTR Value 10k
SYMBOL res 1888 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rpull1
SYMATTR Value 10k
SYMBOL res 1952 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rpull2
SYMATTR Value 10k
SYMBOL Comparators\\LTC6752 1776 48 R0
SYMATTR InstName CMP1
SYMBOL Comparators\\LTC6752 1776 400 R0
SYMATTR InstName CMP2
SYMBOL OpAmps\\AD8040 1440 128 R0
SYMATTR InstName U1
TEXT 2600 80 Left 2 !.tran 1e-3 startup
TEXT 2608 112 Left 2 !.meas t1 find time when v(Vsqr) = 1 cross = 1 td = 0.5m\n.meas t2 find time when v(Vsqr) = 1 cross = 3 td = 0.5m\n.meas freqSQR param 1/(t2-t1)\n.meas tran avgVRAMP AVG v(Vramp) TD=0.5m\n.meas t3 find time when v(Vramp)=avgVRAMP cross=1 TD=0.5m\n.meas t4 find time when v(Vramp)=avgVRAMP cross=3 td=0.5m\n.meas freqRAMP param 1/(t4-t3)\n.meas AMP_VRAMP  PP v(Vramp) from=t3 to =t4\n.meas tran avgVRAMP_B AVG v(Vramp_B) td=0.5m\n.meas t5 find time when v(Vramp_B)=avgVRAMP_B cross=1 TD=0.1m\n.meas t6 find time when v(Vramp_B)=avgVRAMP_B cross=3 TD=0.1m\n.meas freqVRAMP_B param 1/(t6-t5)\n.meas ampVRAMP_B PP v(Vramp_B) from=t5 to=t6\n.meas tran maxPWM MAX v(PWM)\n.meas t7 find time when v(PWM)=maxPWM-0.1 rise=3 td = 0.5m\n.meas t8 find time when v(PWM)=maxPWM-0.1 fall=3 td = 0.5m\n.meas t9 find time when v(PWM)=maxPWM-0.1 rise=4 td = 0.5m\n.meas freqPWM param 1/(t9-t7)\n.meas dutyCyclePWM param (t8-t7)/(t9-t7)
TEXT 1288 -296 Left 4 ;Experiment1: PWM Modulator and Ramp generator
TEXT 1656 880 Left 2 ;Aditya Kumar, EP20B005
RECTANGLE Normal 3488 688 2576 48 2
RECTANGLE Normal 2448 768 2224 16 2
